<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stats/title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #18181b;
            color: white;
        }
        .container {
			font-size: 24px;
            margin-top: 50px;
            padding: 20px;
            border-radius: 10px;
            background-color: #1f1f23;
            display: inline-block;
            text-align: left;
        }
        button {
            background-color: #9146ff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin-top: 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #772ce8;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 8px 0;
            font-size: 18px;
        }
        .error {
            color: red;
        }
		
		small {
			display: block;
			font-size: 15px;
			color: gray;
			margin-bottom: 10px;
		}

		
    </style>
</head>
<body>

    <h1>ğŸ“º Statystyki kanaÅ‚u kaopej w ciÄ…gu ostatnich 30 dni</h1>
<div class="container">
    <!--<p>ğŸ“Š Ranking: <span id="rank">Åadowanie...</span></p>-->

    <p>â³ Czas streamowania: <span id="minutesStreamed">Åadowanie...</span></p>
    <small id="funFactSmall">CaÅ‚kowity czas transmisji na Twitchu</small>

    <p>ğŸ‘¥ Åšrednia widzÃ³w: <span id="avgViewers">Åadowanie...</span></p>
    <small id="avgViewersSmall">Åšrednia liczba osÃ³b oglÄ…dajÄ…cych transmisjÄ™</small>

    <p>ğŸš€ Maksymalna liczba widzÃ³w: <span id="maxViewers">Åadowanie...</span></p>
    <small id="maxViewersSmall">NajwiÄ™ksza liczba widzÃ³w na jednej transmisji</small>

    <p>â° Widzowie oglÄ…dali streamy przez: <span id="hoursWatched">Åadowanie...</span></p>
    <small id="hoursWatchedSmall">CaÅ‚kowity czas oglÄ…dania na Twitchu</small>

    <p>â¤ï¸ Nowi obserwujÄ…cy: <span id="followers">Åadowanie...</span></p>
    <small id="followersSmall">IloÅ›Ä‡ nowych osÃ³b, ktÃ³re zaczÄ™Å‚y obserwowaÄ‡</small>

    <p>â­ ÅÄ…czna liczba obserwujÄ…cych: <span id="followersTotal">Åadowanie...</span></p>
	<small id="totalFollowersSmall">IloÅ›Ä‡ nowych osÃ³b, ktÃ³re zaczÄ™Å‚y obserwowaÄ‡</small>
</div>
<p> ÅºrÃ³dÅ‚o: <a href="https://twitchtracker.com/kaopej">twitchtracker</a></p>

    <script>
        async function fetchTwitchData() {
            try {
                const response = await fetch("https://twitchtracker.com/api/channels/summary/kaopej");
                if (!response.ok) throw new Error("BÅ‚Ä…d pobierania danych");

                const data = await response.json();

                document.getElementById("minutesStreamed").textContent = formatMinutes(data.minutes_streamed) || "Brak danych";
				document.getElementById("funFactSmall").textContent = MStreamedFunfact(data.minutes_streamed);
                document.getElementById("avgViewers").textContent = data.avg_viewers || "Brak danych";
                document.getElementById("avgViewersSmall").textContent = viewersFunfact(data.avg_viewers) || "Brak danych";
				
                document.getElementById("maxViewers").textContent = data.max_viewers || "Brak danych";
                document.getElementById("maxViewersSmall").textContent = viewersFunfact(data.max_viewers) || "Brak danych";
                document.getElementById("hoursWatched").textContent = formatHours(data.hours_watched) || "Brak danych";
				document.getElementById("hoursWatchedSmall").textContent = DStreamedFunfact(data.hours_watched) || "Brak danych";
                document.getElementById("followers").textContent = data.followers || "Brak danych";
                document.getElementById("followersSmall").textContent = viewersFunfact(data.followers) || "Brak danych";
                document.getElementById("followersTotal").textContent = data.followers_total || "Brak danych";
                document.getElementById("totalFollowersSmall").textContent = viewersFunfact(data.followers_total) || "Brak danych";
            } catch (error) {
                console.error("BÅ‚Ä…d:", error);
                document.querySelector(".container").innerHTML = `<p class="error">âŒ BÅ‚Ä…d pobierania danych</p>`;
            }
        }

        function formatMinutes(minutes) {
            const days = Math.floor(minutes / (24 * 60));
            const hours = Math.floor((minutes % (24 * 60)) / 60);
            const mins = minutes % 60;
            return `${days}d ${hours}h ${mins}m`;
        }

        function formatHours(hours) {
            const days = Math.floor(hours / 24);
            const remainingHours = hours % 24;
            return `${days}d ${remainingHours}h`;
        }
		
		function MStreamedFunfact(minutes) {
			const randomFact = Math.floor(Math.random() * 6); // Losuje liczbÄ™ od 0 do 4, by wybraÄ‡ jeden z 5 faktÃ³w

			switch (randomFact) {
				case 0:
					// Ile ludzi siÄ™ urodziÅ‚o w tym czasie (Å›rednio 250 dzieci na minutÄ™)
					const babiesBorn = minutes * 250;
					return `W tym czasie urodziÅ‚o siÄ™ okoÅ‚o ${babiesBorn} dzieci. (250 dzieci na minutÄ™)`;

				case 1:
					// Ile osÃ³b zmarÅ‚o w tym czasie (Å›rednio 120 osÃ³b na minutÄ™)
					const peopleDied = minutes * 120;
					return `W tym czasie zmarÅ‚o okoÅ‚o ${peopleDied} osÃ³b. (120 osÃ³b na minutÄ™)`;

				case 2:
					// Ile razy moÅ¼na obejrzeÄ‡ "Breaking Bad" (trwa 2971 minut)
					const breakingBadCount = Math.floor(minutes / 2971);
					return `W tym czasie moÅ¼na obejrzeÄ‡ "Breaking Bad" okoÅ‚o ${breakingBadCount} razy.`;

				case 3:
					// Ile kilometrÃ³w przejechaÅ‚by pociÄ…g EN 57 (prÄ™dkoÅ›Ä‡ 110 km/h)
					const trainDistance = (minutes / 60) * 110; // Dzielimy przez 60, by przekonwertowaÄ‡ minuty na godziny
					return `PociÄ…g EN 57 przejechaÅ‚by w tym czasie okoÅ‚o ${trainDistance.toFixed(2)} km. (prÄ™dkoÅ›Ä‡ 110 km/h)`;

				case 4:
					// Ile razy ISS pokazaÅ‚oby ZiemiÄ™ (ISS okrÄ…Å¼a ZiemiÄ™ co 92 minuty)
					const issOrbits = Math.floor(minutes / 92);
					return `W tym czasie ISS okrÄ…Å¼yÅ‚oby ZiemiÄ™ okoÅ‚o ${issOrbits} razy. (92 minuty jedno)`;
				case 5:
					// Ile speedronow kangurek kao 2
					const kaospeedrun = Math.floor(minutes / 52);
					return `W tym czasie moÅ¼na speedrunowaÄ‡ kangurek kao runda 2 ${kaospeedrun} razy (zakÅ‚adajÄ…c, Å¼e speedrun trwa 52 min)`;

				default:
					return "BÅ‚Ä…d w losowaniu faktu.";
			}
		}
		
		function DStreamedFunfact(hours) {
			// Przeliczenie godzin na inne wartoÅ›ci
			const percentOfLife = (hours / (73 * 365 * 24)) * 100; // Procent Å›redniego Å¼ycia czÅ‚owieka (73 lata w godzinach)

			// Losowanie numeru do switch
			const randomIndex = Math.floor(Math.random() * 4); // Losujemy jeden z funfactÃ³w

			switch (randomIndex) {
				case 0:
					// Funfact: Obieg Merkurego (w godzinach)
					return `Przez ten czas Merkury okrÄ…Å¼yÅ‚ by SÅ‚oÅ„ce ${Math.floor(hours / (88 * 24))} razy (jeden peÅ‚ny obieg Merkurego trwa 88 dni).`;

				case 1:
					// Funfact: Procent Å¼ycia (w godzinach)
					return `Stanowi to okoÅ‚o ${percentOfLife.toFixed(2)}% Å›redniego Å¼ycia czÅ‚owieka (zakÅ‚adajÄ…c Å›redniÄ… dÅ‚ugoÅ›Ä‡ Å¼ycia 73 lata).`;

				case 2:
					// Funfact: JÄ™zyki (zakÅ‚adajÄ…c, Å¼e nauka jednego jÄ™zyka trwa 1 rok, czyli 8760 godzin)
					return `Przez ten czas moÅ¼na by nauczyÄ‡ siÄ™ okoÅ‚o ${Math.floor(hours / 8760)} nowych jÄ™zykÃ³w (zakÅ‚adajÄ…c, Å¼e nauka jednego jÄ™zyka trwa 1 rok).`;

				case 3:
					// Funfact: PociÄ…g EN 57 (110 km/h) w godzinach
					return `Przez ten czas okrÄ…Å¼yÅ‚byÅ› pociÄ…giem EN 57 rÃ³wnik ${Math.floor(hours * 110 / 40076)} razy (prÄ™dkoÅ›Ä‡ 110 km/h).`;

				default:
					return "Brak danych";
			}
		}

		function viewersFunfact(viewersCount) {
			// Lista miejscowoÅ›ci z liczbÄ… mieszkaÅ„cÃ³w
			const locations = [
				{ name: "RaniÅ¼owa", population: 2317 },
				{ name: "WÄ…chocka", population: 2795 },
				{ name: "GrudziÄ…dza", population: 88658 },
				{ name: "Bydgoszczy", population: 324984 },
				{ name: "Jarocina", population: 26410 },
				{ name: "wieÅ› Stolec", population: 1121 },
				{ name: "wsi Ruchocice", population: 823 },
				{ name: "wsi CycÃ³w", population: 1717 }
			];

			// Losowanie jednej miejscowoÅ›ci
			const randomIndex = Math.floor(Math.random() * locations.length);
			const selectedLocation = locations[randomIndex];

			// Obliczenie procentu populacji
			const percentage = (viewersCount / selectedLocation.population) * 100;

			// ZwrÃ³cenie funfacta
			return `To ${percentage.toFixed(2)}% populacji ${selectedLocation.name} (${selectedLocation.population} mieszkaÅ„cÃ³w).`;
		}

        document.addEventListener("DOMContentLoaded", fetchTwitchData);
    </script>

</body>
</html>
